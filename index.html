<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1">

    <link rel="stylesheet" href="./style/style.css">

    <!--[if lt IE 9]>
<script src="js/ie-support/html5.js"></script>
<script src="js/ie-support/respond.js"></script>
<![endif]-->

</head>

<body>

    <div class="hero" data-bg-image="images/banner.png">
        <div class="container">
            <form action="#" class="find-location">
                <input id="cityInput" type="text" placeholder="Find your location...">
                <input type="submit" value="Find">
            </form>

        </div>
    </div>
    <div class="forecast-table">
        <div class="container">
            <div class="forecast-container">
                <div class="today forecast">
                    <div class="forecast-header">

                    </div>

                    <div class="icondiv">
                        <span></span>
                        <img id="statusIcon" width=60>
                    </div>

                    <div class="forecast-content">


                    </div>

                </div>
            </div>
        </div>

        <script src="js/jquery-1.11.1.min.js"></script>
        <script src="js/plugins.js"></script>
        <script>

            function cleanText(text) {
                var newText = text.replace(/\./g, '. <br>');
                newText = newText.replace(/\°C/g, '°C <br>');
                newText = newText.replace('Now', 'Now: ');

                return newText;
            }
        
            $(".find-location").submit(function (event) { 
                var city = $("#cityInput").val(); /
                fetchSearchData(city); 
            });

            function fetchSearchData(city) {
                var url = "get/" + city;  
                $.get("get/" + city, function (data) { 
                    console.log(data);
                    $(".forecast-header").html(data.data.location);
                    $(".forecast-content").html(cleanText(data.data.weather));
                    $("#statusIcon").attr("src", "http:" + data.data.icon);

                });
            };
        </script>


</body>

</html>